<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>allengaller</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="All about cloud &amp; devops">
<meta property="og:type" content="website">
<meta property="og:title" content="allengaller">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="allengaller">
<meta property="og:description" content="All about cloud &amp; devops">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="allengaller">
<meta name="twitter:description" content="All about cloud &amp; devops">
  
    <link rel="alternate" href="/atom.xml" title="allengaller" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//ogjcp83qb.bkt.clouddn.com/css.css" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">allengaller</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">All about cloud &amp; devops</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-docker-cookbook" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-cookbook/">docker cookbook</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="docker-cookbook"><a href="#docker-cookbook" class="headerlink" title="docker cookbook"></a>docker cookbook</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-cookbook/" data-id="ciypwm38y001u21svs7mji43n" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cookbook/">cookbook</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-devops--portal" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/devops/">devops</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devops/devops--portal/">devops portal</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="about"><a href="#about" class="headerlink" title="about"></a>about</h1><h1 id="awesome"><a href="#awesome" class="headerlink" title="awesome"></a>awesome</h1><p><a href="https://github.com/AcalephStorage/awesome-devops" target="_blank" rel="external">https://github.com/AcalephStorage/awesome-devops</a><br><a href="https://github.com/joubertredrat/awesome-devops" target="_blank" rel="external">https://github.com/joubertredrat/awesome-devops</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/devops/devops--portal/" data-id="ciypwm391001y21svngtxbmr2" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/portal/">portal</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-dockerfile-detail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-dockerfile-detail/">dockerfile</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="about-dockerfile"><a href="#about-dockerfile" class="headerlink" title="about dockerfile"></a>about dockerfile</h1><h1 id="dockerfile-command"><a href="#dockerfile-command" class="headerlink" title="dockerfile command"></a>dockerfile command</h1><ul>
<li><p>point to a Dockerfile anywhere in your file system</p>
<pre><code>docker build -f /path/to/a/Dockerfile .
</code></pre></li>
<li><p>specify a repository and tag at which to save the new image if the build succeeds</p>
<pre><code>docker build -t shykes/myapp .
</code></pre></li>
</ul>
<h1 id="dockerfile-keyword"><a href="#dockerfile-keyword" class="headerlink" title="dockerfile keyword"></a>dockerfile keyword</h1><ul>
<li><p>FROM: base image</p>
</li>
<li><p>MAINTAINER</p>
<pre><code>MAINTAINER ag &quot;allengaller@gmail.com&quot;
</code></pre></li>
<li><p>USER: set user</p>
<pre><code>USER root
</code></pre></li>
<li><p>RUN: run system cmd</p>
<pre><code>RUN apt-get update
RUN [&quot;apt-get&quot;, &quot;update&quot;]
RUN apt-get install -y nginx
RUN touch test.txt &amp;&amp; echo &quot;abc&quot; &gt;&gt; abc.txt
</code></pre></li>
<li><p>EXPOSE: expose port</p>
</li>
<li><p>ADD</p>
<p>  The ADD instruction copies new files, directories or remote file URLs from <src> and adds them to the filesystem of the container at the path <dest>.</dest></src></p>
<p>  pattern: ADD <src>… <dest>; ADD [“<src>“,… “<dest>“]<br>  add folder: ADD /webapp /opt/webapp<br>  add file: ADD abc.txt /opt/<br>  add network file: ADD <a href="https://www.baidu.com/img/bd_logo1.png" target="_blank" rel="external">https://www.baidu.com/img/bd_logo1.png</a> /opt/</dest></src></dest></src></p>
</li>
<li><p>ENV: set env variable</p>
<pre><code>ENV WEBAPP_PORT = 9090
</code></pre></li>
<li><p>WORKDIR: set working directory</p>
<p>  The WORKDIR instruction sets the working directory for any RUN, CMD, ENTRYPOINT, COPY and ADD instructions that follow it in the Dockerfile.The WORKDIR instruction can resolve environment variables previously set using ENV. You can only use environment variables explicitly set in the Dockerfile. For example:</p>
<pre><code>ENV DIRPATH /path
WORKDIR $DIRPATH/$DIRNAME
RUN pwd
</code></pre><p>  The output of the final pwd command in this Dockerfile would be /path/$DIRNAME.It can be used multiple times in the one Dockerfile. If a relative path is provided, it will be relative to the path of the previous WORKDIR instruction. For example:</p>
<pre><code>WORKDIR /a
WORKDIR b
WORKDIR c
RUN pwd
</code></pre><p>  The output of the final pwd command in this Dockerfile would be /a/b/c.</p>
<pre><code>WORKDIR /opt/
</code></pre></li>
<li><p>ENTRYPOINT: set boot command, append parameter to boot cmd</p>
<p>  An ENTRYPOINT allows you to configure a container that will run as an executable.For example, the following will start nginx with its default content, listening on port 80:</p>
<pre><code>docker run -i -t --rm -p 80:80 nginx

ENTRYPOINT [&quot;ls&quot;]
ENTRYPOINT [&quot;ls&quot;]
CMD [&quot;-l&quot;, &quot;-a&quot;]
</code></pre></li>
<li><p>CMD: set boot parameter</p>
<pre><code>CMD [&quot;ls&quot;, &quot;-a&quot;, &quot;-l&quot;]
CMD ls -l -a
</code></pre></li>
<li><p>VOLUME: set volume</p>
<pre><code>VOLUME [&quot;/data&quot;, &quot;/var/www&quot;]
</code></pre></li>
<li><p>ONBUILD: trigger for child image</p>
<pre><code>ONBUILD ADD . /app/src
ONBUILD RUN echo &quot;on build excuted&quot; &gt;&gt; onbuild.txt
</code></pre></li>
<li><p>ARG</p>
</li>
<li><p>STOPSIGNAL</p>
</li>
</ul>
<h1 id="best-practice-link"><a href="#best-practice-link" class="headerlink" title="best practice link"></a>best practice <a href="https://docs.docker.com/engine/articles/dockerfile_best-practices/" target="_blank" rel="external">link</a></h1><ul>
<li><p>Containers should be ephemeral</p>
<p>  The container produced by the image your Dockerfile defines should be as ephemeral as possible.By “ephemeral,” we mean that it can be stopped and destroyed and a new one built and put in place with an absolute minimum of set-up and configuration.</p>
</li>
<li><p>Use a .dockerignore file</p>
<p>  In most cases, it’s best to put each Dockerfile in an empty directory. Then, add to that directory only the files needed for building the Dockerfile. To increase the build’s performance, you can exclude files and directories by adding a .dockerignore file to that directory as well. This file supports exclusion patterns similar to .gitignore files. For information on creating one, see the .dockerignore file.</p>
</li>
<li><p>Avoid installing unnecessary packages</p>
<p>  In order to reduce complexity, dependencies, file sizes, and build times, you should avoid installing extra or unnecessary packages just because they might be “nice to have.” For example, you don’t need to include a text editor in a database image.</p>
</li>
<li><p>Run only one process per container</p>
<p>  In almost all cases, you should only run a single process in a single container. Decoupling applications into multiple containers makes it much easier to scale horizontally and reuse containers. If that service depends on another service, make use of container linking.</p>
</li>
<li><p>Minimize the number of layers</p>
<p>  You need to find the balance between readability (and thus long-term maintainability) of the Dockerfile and minimizing the number of layers it uses. Be strategic and cautious about the number of layers you use.</p>
</li>
<li><p>Sort multi-line arguments</p>
<p>  Here’s an example from the buildpack-deps image:</p>
<p>  RUN apt-get update &amp;&amp; apt-get install -y \</p>
<pre><code>bzr \
cvs \
git \
mercurial \
subversion
</code></pre></li>
<li><p>Build cache</p>
</li>
</ul>
<h1 id="dockerignore"><a href="#dockerignore" class="headerlink" title=".dockerignore"></a>.dockerignore</h1><pre><code>*/temp*
*/*/temp*
temp?
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-dockerfile-detail/" data-id="ciypwm394002121svo7zb0zb3" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/detail/">detail</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-dockerhub-detail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-dockerhub-detail/">dockerhub</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="dockerhub"><a href="#dockerhub" class="headerlink" title="dockerhub"></a>dockerhub</h1><h2 id="about-dockerhub-link"><a href="#about-dockerhub-link" class="headerlink" title="about dockerhub link"></a>about dockerhub <a href="https://hub.docker.com" target="_blank" rel="external">link</a></h2><ul>
<li><p>types:</p>
<pre><code>official image
user image
</code></pre></li>
</ul>
<h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><ul>
<li><p>docker login</p>
<pre><code>comfig: cat ~/.dockercfg
</code></pre></li>
<li><p>build: Automated Build/Trusted Build</p>
</li>
<li><p>registry</p>
<pre><code>docker pull registry
docker run -p 5000:5000 -d -i -t registry
docker commit 3ie9djk 127.0.0.1:5000/my_image:v1
    [registry_host: registry_port\image_name:image_tag]
docker push 127.0.0.1:5000/my_image:v1
</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-dockerhub-detail/" data-id="ciypwm396002521svmkmo7uob" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/detail/">detail</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-engine-detail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-engine-detail/">docker engine</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="about"><a href="#about" class="headerlink" title="about"></a>about</h2><p>source code: <a href="https://github.com/docker/docker" target="_blank" rel="external">https://github.com/docker/docker</a><br>installation: <a href="https://www.docker.com/products/overview" target="_blank" rel="external">https://www.docker.com/products/overview</a></p>
<h2 id="docker-engine-command"><a href="#docker-engine-command" class="headerlink" title="docker engine command"></a>docker engine command</h2><ul>
<li><p>tips</p>
<p>  Delete all containers:</p>
<pre><code>docker rm $(docker ps -a -q)
</code></pre><p>  Delete all images:</p>
<pre><code>docker rmi $(docker images -q)
</code></pre></li>
<li><p>env</p>
<ul>
<li><p>info</p>
</li>
<li><p>version</p>
</li>
</ul>
</li>
<li><p>life-cycle</p>
<ul>
<li><p>create:  (ini: stop)</p>
<pre><code>--restart: check for exit code then restart container; always or on-failure; on-failure:5 restart 5 times max

sudo docker run --restart=always --name docker_restart -d ubuntu /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;
</code></pre></li>
<li><p>exec: exec cmd insid container</p>
<pre><code>sudo docker exec -d daemon_dave touch /etc/new_config_file
sudo docker exec -t -i daemon_dave /bin/bash
</code></pre></li>
<li><p>kill: send SIGKILL signal to container process</p>
</li>
<li><p>pause</p>
</li>
<li><p>restart</p>
</li>
<li><p>rm: cannot remove a running container; docker stop or kill first or docker rm -f bad_ubuntu</p>
<p>  -q: list only container ids;<br>  delete all container at once:</p>
<pre><code>docker rm `docker ps -a -q`
</code></pre></li>
<li><p>run: <a href="https://docs.docker.com/engine/reference/run/" target="_blank" rel="external">reference</a>;(ini: run); </p>
<p>  equals: docker create &amp; docker start</p>
<p>  2 types of container</p>
<ul>
<li><p>interactive<br>  -i: STDIN<br>  -t: open terminal<br>  exit?: docker stop or kill;exit</p>
<pre><code>sudo docker run -i -t --name=inspect_shell ubuntu /bin/bash
inspect_shell: container name
base image: ubuntu
command: /bin/bash
file system: image+writable layer
network: virtual network interface bridge to host &amp; set a IP
</code></pre></li>
<li><p>daemon: -d<br>  exit?: docker stop or kill</p>
<pre><code>sudo docker run --name daemon_while -d ubuntu /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;

return token

docker ps
</code></pre></li>
</ul>
</li>
<li><p>start: start existing container</p>
<pre><code>sudo docker start inspect_shell or cid
</code></pre></li>
<li><p>stop: works for both interactive and daemon container;send SIGTERM signal to container process</p>
<pre><code>sudo docker stop daemon_while
sudo docker stop s39c938dj34489d
</code></pre></li>
<li><p>unpause</p>
</li>
</ul>
</li>
<li><p>registry</p>
<ul>
<li><p>login</p>
</li>
<li><p>logout</p>
</li>
<li><p>pull</p>
</li>
<li><p>push</p>
</li>
<li><p>search</p>
</li>
</ul>
</li>
<li><p>image</p>
<ul>
<li><p>build</p>
</li>
<li><p>images</p>
</li>
<li><p>import:             </p>
<pre><code>cat my_container.rar | sudo docker import - imported:container
repository: imported, tag: container
docker import url res:tag
</code></pre></li>
<li><p>load</p>
</li>
<li><p>rmi</p>
</li>
<li><p>save</p>
</li>
<li><p>tag</p>
</li>
<li><p>commit</p>
</li>
</ul>
</li>
<li><p>container</p>
<ul>
<li><p>attach: attach terminal to interactive container</p>
</li>
<li><p>export</p>
<pre><code>sudo docker run -i -t --nam=inspect_import ubuntu /bin/bash
#... do something
sudo docker export inspect_import &gt; my_container.tar
</code></pre></li>
<li><p>inspect: check out the configuration</p>
<pre><code>sudo docker inspect daemon_dave
</code></pre><p>  -f or –format:</p>
<pre><code>sudo docker inspect --format=&apos;{{ .State.Running }}&apos; daemon_dave
</code></pre></li>
<li><p>port</p>
</li>
<li><p>ps: checkout existing container</p>
<p>  -a: all</p>
<pre><code>Exited(0): exit
</code></pre><p>  -l: latest container<br>  -n=x: latest x container</p>
</li>
<li><p>rename</p>
</li>
<li><p>stats</p>
</li>
<li><p>top: check out UID PID PPID…</p>
<pre><code>sudo docker run -d --name=&quot;daemon_top&quot; ubuntu /bin/bash -c &apos;while true;do sleep 1;done&apos;
</code></pre><p>  2 process:</p>
<pre><code>sudo docker top daemon_top
</code></pre></li>
<li><p>wait</p>
</li>
<li><p>cp</p>
</li>
<li><p>diff</p>
</li>
</ul>
</li>
<li><p>sys log</p>
<ul>
<li><p>events</p>
</li>
<li><p>history</p>
</li>
<li><p>logs</p>
<p>  -f: realtime<br>  –tail=x: last x line</p>
<pre><code>sudo docker logs -f --tail=5 -t daemon_logs
</code></pre></li>
</ul>
</li>
<li><p>other</p>
<ul>
<li><p>docker daemon: <a href="https://docs.docker.com/engine/reference/commandline/daemon/" target="_blank" rel="external">link</a>, A self-sufficient runtime for linux containers.</p>
<p>  The Docker daemon can listen for Docker Remote API requests via three different types of Socket: unix, tcp, and fd.<br>  By default, a unix domain socket (or IPC socket) is created at /var/run/docker.sock, requiring either root permission, or docker group membership.</p>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-engine-detail/" data-id="ciypwm39a002821svvdj89we5" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/detail/">detail</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-filesystem-core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-filesystem-core/">docker filesystem</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="about"><a href="#about" class="headerlink" title="about"></a>about</h1><h1 id="AuFS"><a href="#AuFS" class="headerlink" title="AuFS"></a>AuFS</h1><ul>
<li><p>about</p>
<p>  <a href="http://aufs.sourceforge.net/" target="_blank" rel="external">http://aufs.sourceforge.net/</a></p>
<p>  layered file system</p>
<p>  AuFS is a layered file system, so you can have a read only part, and a write part, and merge those together. So you could have the common parts of the operating system as read only, which are shared amongst all of your containers, and then give each container its own mount for writing.So let’s say you have a container image that is 1GB in size. If you wanted to use a Full VM, you would need to have 1GB times x number of VMs you want. With LXC and AuFS you can share the bulk of the 1GB and if you have 1000 containers you still might only have a little over 1GB of space for the containers OS, assuming they are all running the same OS image.</p>
</li>
</ul>
<h1 id="ceph"><a href="#ceph" class="headerlink" title="ceph"></a>ceph</h1><ul>
<li><p>about</p>
<p>  一个 Linux PB 级分布式文件系统<br>  Ceph is a distributed object store and file system designed to provide excellent performance, reliability and scalability.</p>
</li>
<li><p>feature</p>
<ul>
<li>以时间复杂度为O(1)的方式提供消息持久化能力，即使对TB级以上数据也能保证常数时间复杂度的访问性能。</li>
<li>高吞吐率。即使在非常廉价的商用机器上也能做到单机支持每秒100K条以上消息的传输。</li>
<li>支持Kafka Server间的消息分区，及分布式消费，同时保证每个Partition内的消息顺序传输。</li>
<li>同时支持离线数据处理和实时数据处理。</li>
<li>Scale out：支持在线水平扩展。</li>
</ul>
</li>
<li><p>resource</p>
<p>  link： <a href="http://ceph.com/" target="_blank" rel="external">http://ceph.com/</a><br>  doc： <a href="http://docs.openfans.org/ceph" target="_blank" rel="external">http://docs.openfans.org/ceph</a></p>
</li>
<li><p>core</p>
</li>
<li><p>components</p>
<p>  cluster monitors<br>  clients<br>  metadata server cluster<br>  object storage cluster</p>
</li>
</ul>
<h1 id="overlayfs"><a href="#overlayfs" class="headerlink" title="overlayfs"></a>overlayfs</h1><ul>
<li>link： <a href="https://www.kernel.org/doc/Documentation/filesystems/overlayfs.txt" target="_blank" rel="external">https://www.kernel.org/doc/Documentation/filesystems/overlayfs.txt</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-filesystem-core/" data-id="ciypwm39c002b21svtsnp2crr" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/core/">core</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/filesystem/">filesystem</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-image-detail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-image-detail/">docker image</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="about-docker-image"><a href="#about-docker-image" class="headerlink" title="about docker image"></a>about docker image</h1><ul>
<li><p>standard: <a href="https://github.com/docker/docker/blob/master/image/spec/v1.md" target="_blank" rel="external">Docker Image Specification</a></p>
</li>
<li><p>layer</p>
<pre><code>r &amp; w layer-container
add nginx-image2
add nginx-image1
ubuntu-base image
kernel-bootfs
</code></pre></li>
<li><p>duplication while writing 写时复制机制</p>
</li>
</ul>
<h1 id="docker-image-command"><a href="#docker-image-command" class="headerlink" title="docker image command"></a>docker image command</h1><ul>
<li><p>docker pull</p>
</li>
<li><p>docker run</p>
</li>
<li><p>docker images: check out</p>
<pre><code>docker images ububtu
</code></pre></li>
<li><p>docker inspect</p>
<pre><code>docker inspect ubuntu
</code></pre></li>
<li><p>docker search: AUTOMATED-automatic build</p>
</li>
<li><p>docker rmi: delete image</p>
<pre><code>docker rmi c03k349dfjn2
</code></pre><p>  -f if some container depends on this image:</p>
<pre><code>docker rmi -f ubuntu
</code></pre><p>  delete all:</p>
<pre><code>docker rm $(docker ps -a -q)
</code></pre></li>
<li><p>docker commit: one way to create local image, the other way is dockerfile<br>  commit changes to user image</p>
<pre><code>sudo docker run -t -i ubuntu
apt-get install sqlite3
echo &apos;test docker commit&apos; &gt;&gt; hellodocker
exit
sudo docker commit -m=&quot;message&quot; --author=&quot;ag&quot; CONTAINERID ag/sqlite3:v1
sudo docker run -t -i ag/sqlite3:v1
cat hellodocker
sqlite3 -version
</code></pre></li>
<li><p>docker build: build image with dockerfile</p>
<p>  -rm=false: do not delete the tmp image while building</p>
<p>  -t: set namespace, repo name, tag</p>
<pre><code>sudo docker build -t ag/test:v1
</code></pre></li>
<li><p>docker tag</p>
<pre><code>sudo docker tag ag/test:v1 ag/test:v2
(v1 and v2 will have the same image id)
</code></pre><p>  build with github:</p>
<pre><code>sudo docker build -t ag/test:v1 git://github.com/ag/dockerfile.git
</code></pre></li>
<li><p>docker save</p>
</li>
<li><p>docker load</p>
</li>
<li><p>docker diff</p>
<pre><code>docker diff container
</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-image-detail/" data-id="ciypwm39e002f21svqd89nzvh" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/detail/">detail</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-k8s-core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-k8s-core/">k8s core</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="core"><a href="#core" class="headerlink" title="core"></a>core</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-k8s-core/" data-id="ciypwm39i002i21sv9msto5pk" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/core/">core</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-machine-detail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-machine-detail/">docker machine</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="about"><a href="#about" class="headerlink" title="about"></a>about</h1><p>code: <a href="https://github.com/docker/machine" target="_blank" rel="external">https://github.com/docker/machine</a><br>doc: <a href="https://docs.docker.com/machine/overview/" target="_blank" rel="external">https://docs.docker.com/machine/overview/</a></p>
<h1 id="faq"><a href="#faq" class="headerlink" title="faq"></a>faq</h1><ul>
<li>What’s the difference between Docker Engine and Docker Machine?</li>
</ul>
<p>When people say “Docker” they typically mean Docker Engine, the client-server application made up of the Docker daemon, a REST API that specifies interfaces for interacting with the daemon, and a command line interface (CLI) client that talks to the daemon (through the REST API wrapper). Docker Engine accepts docker commands from the CLI, such as docker run <image>, docker ps to list running containers, docker images to list images, and so on.</image></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-machine-detail/" data-id="ciypwm39m002n21svzvub4bz1" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/detail/">detail</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-mesos-core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <//%- partial('post/date', {class_name: 'article-date', date_format: null}) %>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/docker/">docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/docker/docker-mesos-core/">mesos core</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="core"><a href="#core" class="headerlink" title="core"></a>core</h1><p><a href="https://github.com/Dataman-Cloud/Mesos-CN/blob/master/SUMMARY.md" target="_blank" rel="external">https://github.com/Dataman-Cloud/Mesos-CN/blob/master/SUMMARY.md</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/docker/docker-mesos-core/" data-id="ciypwm39p002q21svs69ki7jr" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/core/">core</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/blockchain/">blockchain</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/career/">career</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloud/">cloud</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/community/">community</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cx/">cx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/devops/">devops</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iaas/">iaas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/microservice/">microservice</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/paas/">paas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ruby/">ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tmp/">tmp</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/architect/">architect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blockchain/">blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloudfoundry/">cloudfoundry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cookbook/">cookbook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/core/">core</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/detail/">detail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filesystem/">filesystem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/install/">install</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openshift/">openshift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">opensource</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openstack/">openstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/portal/">portal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rails/">rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/storage/">storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swarm/">swarm</a></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017-04-03 allengaller<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ogjcp83qb.bkt.clouddn.com/jquery.min.js"></script>



<script src="/js/script.js"></script>

  </div>
</body>
</html>